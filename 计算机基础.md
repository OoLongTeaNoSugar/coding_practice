<!--
 * @Author: Zhanglei
 * @Date: 2022-01-18 21:32:11
 * @LastEditors: Zhanglei
 * @LastEditTime: 2022-01-18 22:12:57
 * @Description: file content
-->

# 计算机基础

## 进程、线程、协程
- 进程
  - 资源调度的基本单位

- 线程
  - 程序执行的基本单位，轻量级的进程
  - 启动快，开销小
  - 需要处理数据一致性问题
  - 同一进程内部有多个线程

- 协程
  - 用户态的轻量级线程，线程内部的调度单位

## 进程和线程比较
- 线程启动速度快，轻量级
- 线程的系统开销小
- 线程使用有一定难度，需要处理数据一致性问题
- 同一线程共享的有堆、全局变量、静态变量、指针，引用、文件等，而独自占有栈

## 一个进程可以创建多少线程
- 理论上进程的虚拟空间为2G，线程大小为1MB，可以创建2048个
- 由可用的虚拟空间和线程大小决定数量

## 外中断和异常的区别
- 外中断由CPU执行指令外的事件引起，比如输入结束、控制台中断
- 异常是由CPU执行指令引起的，比如数据溢出、地址越界等
  
## 进程模型
- Linux进程控制
  - 进程地址空间
  - 进程控制块，内核调度实际是选择进程控制块，记录进程信息
  - 通过上下文切换


## 进程调度算法
- 先来先服务 first-come first-serverd（FCFS）
  - 按照请求顺序进行调度
  - 适合长作业，不适合短作业，短作业会由于长作业长时间占用等待时间过长
- 短作业优先 shortest job first（SJF）
  - 按照运行时间顺序进行调度
  - 但长作业会因为短作业不停到来等待时间过长
- 最短剩余时间优先 shortest remaining time next（SRTN）
  - 新的请求与正在运行的请求做比较，剩余时间长的进程挂起
- 时间片轮转
  - 进程按照FCFS排列
  - 分配时间片，时间片用完，进程排到队尾，给队首进程继续分配时间片
  - 效率与时间片大小有关

- 优先级调度

- 多级反馈队列


## Linux进程间通信方式

- 管道
  - 无名管道
    - 内存文件形式
    - 数据单向流通，只能在父子进程之间使用
  - 有名管道
    - 借助文件系统，能够在没有亲缘关系的进程之间使用
    - 遵循FIFO原则

- 共享内存
  - 映射一段能够被其他进程访问的内存
  - 效率高，与信号量配合使用实现进程同步与通信

- 信号
  - 用于通知进程某个事件已经发生，比如ctrl+c
- 信号量
  - 计数器，用于控制多个进程对共享资源的互斥访问

- 套接字
  - 适用不同机器之间的进程通信，也可用于同一机器的两个进程

- 消息队列
  - 消息的链表，存放在内核中由消息队列标识符标识
  - 克服信号传递信息少、管道只能承载无格式字节流以及缓冲区大小受限等缺点。

## Linux下的同步机制

- POSIX信号量
  - 可以用于进程、线程同步

- POSIX互斥锁+条件变量
  - 只能用于线程同步

## 进程状态切换

- 